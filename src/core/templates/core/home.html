{% extends "base.html" %}
{% block title %}Mugalimder.kz ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π{% endblock %}

{% block content %}

<section class="card hero">
  <h1>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</h1>
  <p>–ü–æ—É—Ä–æ—á–Ω—ã–µ –ø–ª–∞–Ω—ã, –ö–¢–ü, –º–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –°–û–†/–°–û–ß ‚Äî —É–¥–æ–±–Ω–æ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º –∏ –∫–ª–∞—Å—Å–∞–º (1‚Äì11).</p>

  <div class="actions">
    <a class="btn btn-primary" href="/materials/list/">–ù–∞–π—Ç–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</a>

    {% if user.is_authenticated %}
      <a class="btn btn-accent" href="/materials/create/">–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</a>
    {% else %}
      <a class="btn btn-accent" href="{% url 'register' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
    {% endif %}
  </div>
</section>

<div class="grid">

  {# –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê: —Ñ–∏–ª—å—Ç—Ä—ã + –ø–æ—Å–ª–µ–¥–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã #}
  <div class="card section">
    <h2>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫</h2>

    <div class="filters">
      <div class="field">
        <label>–¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞</label>
        <select onchange="if(this.value) window.location.href=this.value;">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
          {% for t in material_types %}
            <option value="/materials/list/?type={{ t.slug }}">{{ t.title }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="field">
        <label>–ü—Ä–µ–¥–º–µ—Ç</label>
        <select onchange="if(this.value) window.location.href=this.value;">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
          {% for s in subjects %}
            <option value="/materials/list/?subject={{ s.slug }}">{{ s.title }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="field">
        <label>–ö–ª–∞—Å—Å</label>
        <select onchange="if(this.value) window.location.href=this.value;">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
          {% for g in grades %}
            <option value="/materials/list/?grade={{ g }}">{{ g }} –∫–ª–∞—Å—Å</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;">
      <a class="btn btn-outline" href="/materials/list/">–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥</a>
      {% if user.is_authenticated %}
        <a class="btn btn-primary" href="/materials/create/">–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</a>
      {% else %}
        <a class="btn btn-primary" href="{% url 'login' %}">–í–æ–π—Ç–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è</a>
      {% endif %}
    </div>
  </div>

  {# –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê: —Å—Ç–∞—Ç—å–∏ + –Ω–æ–≤–æ—Å—Ç–∏ #}
  <aside class="card section">
    <h2>–°–≤–µ–∂–∏–µ —Å—Ç–∞—Ç—å–∏</h2>

    {% if latest_articles %}
      <div class="list">
        {% for a in latest_articles %}
          <div class="item">
            <div style="font-weight:800;">{{ a.title }}</div>
            {% if a.short_description %}
              <div class="meta">{{ a.short_description }}</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div style="color:var(--muted);">–ü–æ–∫–∞ —Å—Ç–∞—Ç–µ–π –Ω–µ—Ç.</div>
    {% endif %}

    <div style="height:14px;"></div>

    <h2>–ù–æ–≤–æ—Å—Ç–∏ –∏ –∑–∞–∫–æ–Ω—ã</h2>
    {% if latest_news %}
      <div class="list">
        {% for n in latest_news %}
          <div class="item">
            <div style="font-weight:800;">{{ n.title }}</div>
            {% if n.short_description %}
              <div class="meta">{{ n.short_description }}</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div style="color:var(--muted);">–ü–æ–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–µ—Ç.</div>
    {% endif %}
  </aside>

</div>

<section class="card section" style="margin-top:16px;">
  <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h2>

  {% if latest_materials %}
    <div class="cards">
      {% for m in latest_materials %}
        <div class="item">
          <div style="font-weight:800;">{{ m.title }}</div>
          <div class="meta">
            {{ m.material_type.title }} ‚Ä¢ {{ m.subject.title }} ‚Ä¢ {{ m.grade }} –∫–ª–∞—Å—Å
          </div>

          <div style="margin-top:10px;">
            {% if user.is_authenticated %}
              <a class="btn btn-outline" href="{% url 'materials-download' m.pk %}">–°–∫–∞—á–∞—Ç—å</a>
            {% else %}
              <span style="color:var(--muted);">üîí</span>
              <a class="btn btn-outline" href="{% url 'login' %}">–í–æ–π—Ç–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è</a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>

    <div style="margin-top:12px;">
      <a href="/materials/list/" style="color:var(--brand);font-weight:700;">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Üí</a>
    </div>
  {% else %}
    <div style="color:var(--muted);">–ü–æ–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–µ—Ç. –î–æ–±–∞–≤—å –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî –∏ –±–ª–æ–∫ –æ–∂–∏–≤—ë—Ç.</div>
  {% endif %}
</section>

<section class="card section" style="margin-top:16px;">
  <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</h2>

  {% if material_types %}
    <div style="display:flex;gap:10px;flex-wrap:wrap;">
      {% for t in material_types %}
        <a class="btn btn-outline" href="/materials/list/?type={{ t.slug }}">{{ t.title }}</a>
      {% endfor %}
    </div>
  {% else %}
    <div style="color:var(--muted);">–ü–æ–∫–∞ –Ω–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π. –î–æ–±–∞–≤—å –≤ –∞–¥–º–∏–Ω–∫–µ: <b>Material types</b>.</div>
  {% endif %}

  <div style="height:12px;"></div>

  <h2>–ü—Ä–µ–¥–º–µ—Ç—ã</h2>
  {% if subjects %}
    <div style="display:flex;gap:10px;flex-wrap:wrap;">
      {% for s in subjects %}
        <a class="btn btn-outline" href="/materials/list/?subject={{ s.slug }}">{{ s.title }}</a>
      {% endfor %}
    </div>
  {% else %}
    <div style="color:var(--muted);">–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥–º–µ—Ç–æ–≤. –î–æ–±–∞–≤—å –≤ –∞–¥–º–∏–Ω–∫–µ: <b>Subjects</b>.</div>
  {% endif %}

  <div style="height:12px;"></div>

  <h2>–ö–ª–∞—Å—Å—ã</h2>
  <div style="display:flex;gap:10px;flex-wrap:wrap;">
    {% for g in grades %}
      <a class="btn btn-outline" href="/materials/list/?grade={{ g }}">{{ g }} –∫–ª–∞—Å—Å</a>
    {% endfor %}
  </div>
</section>

{% endblock %}