{% extends "base.html" %}
{% block title %}–°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤{% endblock %}

{% block content %}
<h1>–°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</h1>

<form method="get" style="margin-bottom:16px;">
  <label>–¢–∏–ø:</label>
  <select name="type">
    <option value="">‚Äî –≤—Å–µ ‚Äî</option>
    {% for t in material_types %}
      <option value="{{ t.slug }}" {% if selected_type and selected_type.slug == t.slug %}selected{% endif %}>{{ t.title }}</option>
    {% endfor %}
  </select>

  <label style="margin-left:12px;">–ü—Ä–µ–¥–º–µ—Ç:</label>
  <select name="subject">
    <option value="">‚Äî –≤—Å–µ ‚Äî</option>
    {% for s in subjects %}
      <option value="{{ s.slug }}" {% if selected_subject and selected_subject.slug == s.slug %}selected{% endif %}>{{ s.title }}</option>
    {% endfor %}
  </select>

  <label style="margin-left:12px;">–ö–ª–∞—Å—Å:</label>
  <select name="grade">
    <option value="">‚Äî –≤—Å–µ ‚Äî</option>
    {% for g in grades %}
      <option value="{{ g }}" {% if selected_grade == g %}selected{% endif %}>{{ g }} –∫–ª–∞—Å—Å</option>
    {% endfor %}
  </select>

  <button type="submit" style="margin-left:12px;">–§–∏–ª—å—Ç—Ä</button>
</form>

{% if user.is_authenticated %}
  <p><a href="{% url 'materials-create' %}">–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</a></p>
{% else %}
  <p>–ß—Ç–æ–±—ã —Å–∫–∞—á–∏–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã ‚Äî <a href="{% url 'login' %}">–≤–æ–π–¥–∏—Ç–µ</a> –∏–ª–∏ <a href="{% url 'register' %}">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>.</p>
{% endif %}

<ul>
  {% for m in materials %}
    <li style="margin-bottom:14px;">
      <strong>{{ m.title }}</strong><br>
      {{ m.material_type.title }} ‚Ä¢ {{ m.subject.title }} ‚Ä¢ {{ m.grade }} –∫–ª–∞—Å—Å<br>

      {% if user.is_authenticated %}
        <a href="{% url 'materials-download' m.pk %}">–°–∫–∞—á–∞—Ç—å</a>
      {% else %}
        üîí –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
      {% endif %}
    </li>
  {% empty %}
    <li>–ü–æ–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–µ—Ç.</li>
  {% endfor %}
</ul>
{% endblock %}